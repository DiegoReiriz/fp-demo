version: "2"
services:
  elasticsearch:
    image: elasticsearch
    networks:
      - docker_elk
    ports:
      - "9200:9200"
      - "9300:9300"
  kibana:
    image: kibana
    links:
      - elasticsearch
    networks:
      - docker_elk
    ports:
      - "5601:5601"
  nginx:
    image: nginx
    ports:
      - "1337:80"
    links:
      - kibana
      - node
    networks:
      - docker_elk
    volumes:
      - ./fp-nginx/passwd:/etc/nginx/passwd
      - ./fp-nginx/default.conf:/etc/nginx/conf.d/default.conf
  node:
   image: diegoreico/fp-demo
   links:
     - elasticsearch
     - kibana
   networks:
     - docker_elk
   depends_on:
     - elasticsearch
     - kibana
networks:
  docker_elk:
    driver: bridge
